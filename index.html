<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <div id="root"></div>
   <script type="module">
    

import { render, createElement } from './core/dom.js';
import { useState } from './core/state.js';
import { Button, Div, H1, Input, Ul, Li, P } from './core/dom.js';

function TodoList() {
    const [todos, setTodos] = useState([]);
    const [input, setInput] = useState("");
    const [count, setCount] = useState(0);
    const [error, setError] = useState(null);


    
    return Div({ className: "todo-list" }, [
        H1({ className: "title" }, ["Todo List"]),
        Input({className: error ? "error" : "input", type: "text", placeholder: "Add a todo", value: input, oninput: (e) => {
            console.log(error)
            if (todos.includes(e.target.value)) {
                setError("exists")
            }else{
                setError(null)
            }
            setInput(e.target.value)
        } }),
        Button({ onClick: () => setTodos(()=>{
            if (todos.includes(input)) {
                return todos;
            }
            return [input, ...todos];
        })}, ["Add Todo"]),
        Button({ onClick: () => setTodos([])}, ["Clear Todos"]),
        Button({ onClick: ()=> setTodos([input, ...todos])}, ["prepend todo"]),
        Ul( { className: "todo-list" }, 
            todos.map((todo, index) => Li({ className: "todo", key: index }, [todo, Button({ onClick: () => setTodos(todos.filter(t => t !== todo))}, ["X"])]))
        ),
        Button({ onClick: () => setCount(count + 1)}, ["Increment"]),
        Button({ onClick: () => setCount(count - 1)}, ["Decrement"]),
        P({ className: "count" }, [count])
    ]);
}


render(TodoList);

   </script>
</body>

</html>